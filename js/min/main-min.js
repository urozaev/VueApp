"use strict";const users=[],vm=new Vue({el:"#app",data:function(){return{items:users,item:{name:"",phone:"",birthday:"",role:"",archive:""},edit:!1,editIndex:-1,name:""}},mounted:function(){fetch("http://localhost:3000/users").then(t=>{if(200<=t.status&&t.status<300)return t;throw new Error(response.statusText)}).then(function(t){return t.json()}).then(function(t){t.forEach(t=>{users.push(t)})}).catch(t=>{console.log(t)})},methods:{addItem:function(t){this.edit?(this.items[this.editIndex]=this.item,this.edit=!1,this.editIndex=-1):fetch("http://localhost:3000/users",{method:"POST",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(this.item)}).then(t=>{if(200<=t.status&&t.status<300)return t;throw new Error(response.statusText)}).then(t=>t.json()).then(t=>{users.push(t)}).then(()=>{console.log("Пользователь добавлен")}).catch(t=>{console.log(t)}),$("#modal").modal("hide"),t.preventDefault()},editItem:function(t){this.edit=!0,this.editIndex=t,this.item=this.items[t],$("#modal").modal("show")},editCancel:function(t){this.item={name:"",phone:"",birthday:"",role:"",archive:""},this.editIndex=-1},filterAll(){this.items=_.filter(users,function(t){return users})},filterDesign(){this.items=_.filter(users,function(t){return"designer"===t.role})},filterDeveloper(){this.items=_.filter(users,function(t){return"developer"===t.role})},filterManager(){this.items=_.filter(users,function(t){return"manager"===t.role})},sortByName(){this.items=_.sortBy(this.items,["name"])},sortByBDate(){this.items=_.sortBy(this.items,["birthday"])},sortByID(){this.items=_.sortBy(this.items,["id"])}},props:{user:Object}}),setActive=t=>{[...t.parentElement.children].forEach(t=>t.classList.remove("active")),t.classList.add("active")};let active=[...document.body.querySelectorAll(".sort-button")];active.forEach(t=>t.addEventListener("click",e=>setActive(t)));